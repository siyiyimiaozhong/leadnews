{"version":3,"sources":["webpack:///./src/api/comments.js","webpack:///src/views/comment/index.vue","webpack:///./src/views/comment/index.vue?5570","webpack:///./src/views/comment/index.vue"],"names":["__webpack_exports__","params","data","Request","url","API_CLOSECOMMENTS","method","API_ADMIRECOMMENT","target","API_CANCELADMIRECOMMENT","sticky","API_COMMENTS","__WEBPACK_IMPORTED_MODULE_0__utils_request__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__constants_api__","comment","name","commentData","commentPage","pageSize","currentPage","total","multipleSelection","created","this","pageChange","computed","methods","toggleSelection","rows","_this","forEach","row","$refs","multipleTable","toggleRowSelection","clearSelection","handleSelectionChange","val","getArticleList","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","Object","content","sent","stop","newPage","page","size","modifyComment","id","$router","push","path","$message","message","type","closeOrOpenComment","_this3","_callee2","_context2","comment_status","$confirm","confirmButtonText","cancelButtonText","comments","article_id","allow_comment","getComments","per_page","pageCount","views_comment","render","_vm","_h","$createElement","_c","_self","staticClass","ref","staticStyle","width","attrs","tooltip-effect","header-cell-style","backgroundColor","on","selection-change","label","prop","_v","align","scopedSlots","_u","key","fn","scope","_s","click","$event","layout","page-size","current-page","update:currentPage","$set","update:current-page","current-change","staticRenderFns","Component","normalizeComponent","ssrContext"],"mappings":"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","file":"static/js/12.adba0ff55b03cac5e575.js","sourcesContent":["import Request from  '@/utils/request'\r\nimport { API_COMMENT_LIST , API_CLOSECOMMENTS , API_ADMIRECOMMENT , API_CANCELADMIRECOMMENT} from  '@/constants/api'\r\n\r\n/****获取评论列表*****/\r\nexport function getCommentList (data) {\r\n    return Request({\r\n        url:API_COMMENT_LIST,\r\n        method:'post',\r\n        params:{},\r\n        data\r\n    })\r\n\r\n}\r\n/***关闭或打开某个文章的评论  params 和data为不同类型参数*****/\r\nexport function  closeOrOpenComment (params,data) {\r\n   return Request({\r\n          url:API_CLOSECOMMENTS,\r\n          method:'put',\r\n          params,\r\n          data\r\n    })\r\n}\r\n//对某个评论进行点赞\r\nexport function admireComment (data) {\r\n    return Request({\r\n        url:API_ADMIRECOMMENT,\r\n        method:'post',\r\n        data\r\n  })\r\n}\r\n//取消点赞\r\nexport function  cancleAdmire (target) {\r\n    return Request({\r\n        url:API_CANCELADMIRECOMMENT + target,\r\n        method:'delete',\r\n\r\n  })\r\n}\r\n//修改置顶\r\nexport function  changeTop (target,sticky) {\r\n   return Request({\r\n       url:`/comments/${target}/sticky`,\r\n       method:'put',\r\n       data:{sticky}\r\n     })\r\n}\r\n//添加回复内容\r\nexport function  addComments (data) {\r\n    return Request({\r\n        url:API_COMMENTS,\r\n        method:'post',\r\n        data\r\n    })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/comments.js","<template>\r\n  <div class=\"comment-container\">\r\n    <el-table\r\n      ref=\"multipleTable\"\r\n      :data=\"commentData\"\r\n      tooltip-effect=\"dark\"\r\n      style=\"width: 100%\"\r\n      :header-cell-style=\"{backgroundColor:'#fbfbfb'}\"\r\n      @selection-change=\"handleSelectionChange\">\r\n      <el-table-column\r\n        label=\"标题\"\r\n        prop=\"title\"\r\n       >\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"评论状态\"\r\n        prop=\"comment_status\"\r\n        align=\"center\"\r\n        width=\"120\">\r\n        <template slot-scope=\"scope\">{{ scope.row.comment_status ? '正常' : '关闭' }}</template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"total_comment_count\"\r\n        label=\"总评论数\"\r\n        align=\"center\"\r\n        width=\"120\"\r\n       >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"fans_comment_count\"\r\n        label=\"粉丝评论数\"\r\n        align=\"center\"\r\n        width=\"120\"\r\n        >\r\n      </el-table-column>\r\n       <el-table-column\r\n      label=\"操作\"\r\n      width=\"300\">\r\n      <template slot-scope=\"scope\">\r\n        <el-button @click=\"modifyComment(scope.row)\" type=\"text\" size=\"small\">修改</el-button>\r\n        <el-button @click=\"closeOrOpenComment(scope.row)\" type=\"text\" size=\"small\">{{ scope.row.comment_status ? '关闭评论' : '打开评论'}}</el-button>\r\n      </template>\r\n    </el-table-column>\r\n    </el-table>\r\n    <div class=\"pagination\">\r\n      <el-pagination\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :page-size=\"commentPage.pageSize\"\r\n        :current-page.sync=\"commentPage.currentPage\"\r\n        :total=\"commentPage.total\"\r\n        @current-change=\"pageChange\"\r\n        >\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { closeOrOpenComment,getCommentList } from  '@/api/comments'\r\nimport { searchArticle } from  '@/api/content'\r\nexport default {\r\n  name: 'ContentManage',\r\n  data() {\r\n    return {\r\n      commentData: [],\r\n      commentPage:{\r\n        pageSize:10,//每页条数\r\n        currentPage:1, //当前页码\r\n        total:0  //总记录数\r\n      },\r\n      multipleSelection: []\r\n    }\r\n  },\r\n  created () {\r\n    //初始化之后加载数据 文章页码数据为最初的数据\r\n     this.pageChange(1)\r\n  },\r\n  computed: {\r\n\r\n  },\r\n  methods: {\r\n    toggleSelection(rows) {\r\n      if (rows) {\r\n        rows.forEach(row => {\r\n          this.$refs.multipleTable.toggleRowSelection(row);\r\n        });\r\n      } else {\r\n        this.$refs.multipleTable.clearSelection();\r\n      }\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n   async getArticleList(params) {\r\n      //拉取评论\r\n     let result = await searchArticle(params)\r\n     this.commentPage.total = result.total\r\n     this.commentData = result.data\r\n    },\r\n    //页码发生改变时触发\r\n    pageChange (newPage) {\r\n      this.commentPage.currentPage=newPage;\r\n      this.getArticleList({page:newPage,size:this.commentPage.pageSize})\r\n    },\r\n    //修改评论\r\n    modifyComment (row) {\r\n      if(row.id){\r\n          this.$router.push({path:'/comment/detail?articleId=' + row.id})\r\n      }else {\r\n         this.$message({ message:'当前文章不可查看评论',type:'warning' })\r\n      }\r\n    },\r\n    //关闭或者打开评论\r\n  async  closeOrOpenComment (row) {\r\n      let message = !row.comment_status ? '此操作将开启评论，是否进行此操作?' : '关闭评论将清除所有评论，读者也不能再进行评论，是否进行此操作?'\r\n      let confirmResult = await this.$confirm(message,'提示',{confirmButtonText: '确定',cancelButtonText: '取消', type: 'warning' });\r\n      let  result = await closeOrOpenComment({article_id:row.id},{allow_comment:!row.comment_status })\r\n      this.$message({ type:'success', message:'操作成功' })\r\n      this.getComments({page:this.commentPage.currentPage, per_page:this.commentPage.pageCount })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n.comment-container {\r\n  background-color: #ffffff;\r\n  border: 1px solid #e7e7e9;\r\n  .pagination {\r\n    margin: 50px 0;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/comment/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment-container\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.commentData,\"tooltip-effect\":\"dark\",\"header-cell-style\":{backgroundColor:'#fbfbfb'}},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"评论状态\",\"prop\":\"comment_status\",\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.comment_status ? '正常' : '关闭'))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"total_comment_count\",\"label\":\"总评论数\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fans_comment_count\",\"label\":\"粉丝评论数\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.modifyComment(scope.row)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.closeOrOpenComment(scope.row)}}},[_vm._v(_vm._s(scope.row.comment_status ? '关闭评论' : '打开评论'))])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"layout\":\"total, prev, pager, next, jumper\",\"page-size\":_vm.commentPage.pageSize,\"current-page\":_vm.commentPage.currentPage,\"total\":_vm.commentPage.total},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.commentPage, \"currentPage\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.commentPage, \"currentPage\", $event)},\"current-change\":_vm.pageChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-7f0db089\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/comment/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7f0db089\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7f0db089\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7f0db089\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/comment/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}