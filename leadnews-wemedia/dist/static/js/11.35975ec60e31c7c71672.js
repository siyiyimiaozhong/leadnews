webpackJsonp([11],{"5bW2":function(e,t){},YVzU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lC5x"),n=a.n(s),r=a("4YfN"),l=a.n(r),i=a("J0Oq"),c=a.n(i),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"filter"},[a("header",[e._v("全部图文")]),e._v(" "),a("div",{staticClass:"filter-container"},[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{label:"文章状态：","label-width":"110px"}},e._l(e.stateList,function(t){return a("a",{key:t.value,class:["state_label",t.value===e.selectState.value?"active":""],attrs:{href:"javascript:;"},on:{click:function(a){return e.changeState(t)}}},[e._v(e._s(t.label))])}),0),e._v(" "),a("el-form-item",{attrs:{label:"频道列表：","label-width":"110px"}},[a("el-select",{on:{change:e.queryData},model:{value:e.channel_id,callback:function(t){e.channel_id=t},expression:"channel_id"}},e._l(e.channel_list,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间选择:  ","label-width":"110px"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.queryData},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)],1)])},staticRenderFns:[]};var o=a("C7Lr")({props:["changePage","channel_list"],data:function(){return{stateList:[{label:"全部",value:5},{label:"草稿",value:0},{label:"待审核",value:1},{label:"审核通过",value:2},{label:"审核失败",value:3}],selectState:{label:"全部",value:5},channel_id:null,date:null}},methods:{queryData:function(){var e={resetPage:!0,channel_id:this.channel_id,status:5==this.selectState.value?null:this.selectState.value,page:1,begin_pubdate:this.date&&this.date.length?this.date[0]:null,end_pubdate:this.date&&this.date.length>1?this.date[1]:null};this.changePage&&this.changePage(e)},changeState:function(e){this.selectState=e,this.queryData()}}},u,!1,function(e){a("5bW2")},"data-v-22356a30",null).exports,d=a("xT6B"),h=a("lS+k"),p={props:["host","articleList","pageSize","total","changePage","deleteArticlesById","upOrDown"],data:function(){return{listPage:{currentPage:1}}},methods:{noAction:function(){alert("该功能暂未实现")},getImage:function(e){if(e.images){var t=e.images.split(",");if(t.length>0)return this.host+t[0]}return h},pageChange:function(e){this.changePage&&this.changePage({page:e})},resetPage:function(){},dateFormat:function(e){return d.a.format13HH(e)},operateBtn:function(e,t){var a=this;switch(t.target.dataset.type){case"modify":this.$router.push({path:"/article/publish",query:{articleId:e}});break;case"down":this.upOrDown(e,0);break;case"up":this.upOrDown(e,1);break;case"del":this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteArticlesById&&a.deleteArticlesById(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"result"},[a("header",[e._v(e._s("共找到"+e.total+"条符合条件的内容"))]),e._v(" "),a("ul",{staticClass:"result-container"},e._l(e.articleList,function(t,s){return a("li",{key:s,staticClass:"articles-item"},[a("img",{staticClass:"article-img",attrs:{src:e.getImage(t)}}),e._v(" "),a("dl",{staticClass:"article-content"},[a("dt",[a("a",{attrs:{href:"#"},on:{click:e.noAction}},[e._v(e._s(t.title))]),e._v(" "),a("div",{on:{click:function(a){return e.operateBtn(t.id,a)}}},["9"==t.status&&"0"==t.enable?a("i",{staticClass:"el-icon-upload2",attrs:{"data-type":"up"}},[e._v("上架")]):e._e(),e._v(" "),"9"==t.status&&"1"==t.enable?a("i",{staticClass:"el-icon-download",attrs:{"data-type":"down"}},[e._v("下架")]):e._e(),e._v(" "),"9"!=t.status?a("i",{staticClass:"el-icon-edit",attrs:{"data-type":"modify"}},[e._v("修改")]):e._e(),e._v(" "),"9"!=t.status?a("i",{staticClass:"el-icon-delete",attrs:{"data-type":"del"}},[e._v("删除")]):e._e()])]),e._v(" "),a("dd",["0"==t.status?a("el-tag",{staticClass:"draft"},[e._v("草稿")]):e._e(),e._v(" "),"1"==t.status?a("el-tag",{staticClass:"audit"},[e._v("待审核")]):e._e(),e._v(" "),"3"==t.status?a("el-tag",{staticClass:"audit"},[e._v("待人工审核")]):e._e(),e._v(" "),"4"==t.status?a("el-tag",{staticClass:"audit"},[e._v("待发布")]):e._e(),e._v(" "),"8"==t.status?a("el-tag",{staticClass:"publish"},[e._v("待发布")]):e._e(),e._v(" "),"9"==t.status?a("el-tag",{staticClass:"publish"},[e._v("已发表")]):e._e(),e._v(" "),"2"==t.status?a("el-tag",{staticClass:"unaudit"},[e._v("未通过审核:{item.reason}")]):e._e(),e._v(" "),"100"==t.status?a("el-tag",{staticClass:"delete"},[e._v("已删除")]):e._e(),e._v(" "),"9"==t.status?["0"==t.enable?a("el-tag",{staticClass:"draft"},[e._v("下架")]):e._e(),e._v(" "),"1"==t.enable?a("el-tag",{staticClass:"audit"},[e._v("上架")]):e._e()]:e._e()],2),e._v(" "),a("dd",{staticClass:"time"},[e._v(e._s(e.dateFormat(t.publish_time)))])])])}),0),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total,prev, pager, next","current-page":e.listPage.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.listPage,"currentPage",t)},"update:current-page":function(t){return e.$set(e.listPage,"currentPage",t)}}})],1)])},staticRenderFns:[]};var g=a("C7Lr")(p,_,!1,function(e){a("k+ny")},"data-v-40da6952",null).exports,v=a("+KWZ"),f=a("W3Tz"),m={name:"ContentManage",data:function(){return{channel_list:[],articleList:[],total:0,host:"",searchText:null,params:{page:1,size:10},tempParams:{}}},created:function(){var e=this.$route.query.searchText;this.searchText=e,this.getChannels(),this.searchArticle()},components:{SearchTool:o,SearchResult:g},computed:{},methods:{searchArticle:function(e){var t=this;return c()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.tempParams=e,a.next=3,Object(v.d)(l()({},t.params,{key_word:t.searchText},t.tempParams));case 3:s=a.sent,t.$refs.mySearchResult&&t.$refs.mySearchResult.resetPage(),t.host=s.host,t.total=s.total,t.articleList=s.data;case 8:case"end":return a.stop()}},a,t)}))()},deleteArticlesById:function(e){var t=this;return c()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(v.a)(e);case 2:0==(s=a.sent).code?(t.$message({type:"success",message:"删除成功!"}),t.searchArticle()):t.$message({type:"error",message:s.error_message});case 4:case"end":return a.stop()}},a,t)}))()},upOrDown:function(e,t){var a=this;return c()(n.a.mark(function s(){var r;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(v.e)({id:e,enable:t});case 2:0==(r=s.sent).code?(a.$message({type:"success",message:"操作成功!"}),a.searchArticle()):a.$message({type:"error",message:r.error_message});case 4:case"end":return s.stop()}},s,a)}))()},getChannels:function(){var e=this;return c()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)();case 2:a=t.sent,e.channel_list=a.data;case 4:case"end":return t.stop()}},t,e)}))()}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[e.searchText?e._e():a("search-tool",{attrs:{changePage:e.searchArticle,channel_list:e.channel_list}}),e._v(" "),a("search-result",{ref:"mySearchResult",attrs:{articleList:e.articleList,host:e.host,total:e.total,changePage:e.searchArticle,pageSize:e.params.size,deleteArticlesById:e.deleteArticlesById,upOrDown:e.upOrDown}})],1)},staticRenderFns:[]},b=a("C7Lr")(m,y,!1,null,null,null);t.default=b.exports},"k+ny":function(e,t){}});
//# sourceMappingURL=11.35975ec60e31c7c71672.js.map