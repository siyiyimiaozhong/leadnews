webpackJsonp([4],{"0hrC":function(e,t){},"7Rwb":function(e,t){},YVzU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("lC5x"),r=a.n(n),s=a("4YfN"),i=a.n(s),l=a("J0Oq"),o=a.n(l),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"filter"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{"label-width":"100px",label:"搜索内容"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容标题"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.queryData}},[e._v("搜 索")])],1)],1)],1)])},staticRenderFns:[]};var u=a("C7Lr")({props:["changeParam","addData"],data:function(){return{name:""}},methods:{queryData:function(){var e={filed:"title",type:"like",value:this.name};this.changeParam(e)}}},c,!1,function(e){a("7Rwb")},"data-v-e2531c0a",null).exports,f=a("xT6B"),p=a("t5DY"),d=a("lS+k"),m={props:["host","list","fileds","table","pageSize","total","changePage","changeStatus","editData","viewData"],data:function(){return{listPage:{currentPage:1},id:{filed:"id",type:"eq",value:""},setForStatus:{status:""}}},methods:{getImage:function(e,t){return e[t]?this.host+e[t]:d},pageChange:function(e){this.changePage&&this.changePage({page:e})},resetPage:function(){},dateFormat:function(e){return f.a.format13(e)},operateForDisable:function(e,t,a){var n=this;return o()(r.a.mark(function s(){var i,l;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.id.value=e,i={name:n.table,where:[n.id],sets:[{filed:"status",value:t}]},r.next=4,Object(p.c)(i);case 4:0==(l=r.sent).code?(n.changeStatus(a,t),n.$message({type:"success",message:"操作成功！"})):n.$message({type:"error",message:l.errorMessage});case 6:case"end":return r.stop()}},s,n)}))()},operateForView:function(e){this.viewData(e)},open:function(e){var t=this;this.$prompt(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var a=e.value;t.params.msg=a,t.updateData(t.params)}).catch(function(){})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"result"},[a("header",[e._v(e._s("共找到"+e.total+"条符合条件的内容"))]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[e._l(e.fileds,function(t){return[t.list?["radio"==t.type?a("el-table-column",{attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(t.radios,function(r){return[r.value==n.row[t.name]?[0==n.row[t.name]?a("el-tag",{attrs:{effect:"plain",type:"info"}},[e._v(e._s(r.label))]):1==n.row[t.name]?a("el-tag",{attrs:{effect:"plain",type:"success"}},[e._v(e._s(r.label))]):0==n.row[t.name]?a("el-tag",{attrs:{effect:"plain",type:"info"}},[e._v(e._s(r.label))]):1==n.row[t.name]?a("el-tag",{attrs:{effect:"plain",type:"success"}},[e._v(e._s(r.label))]):2==n.row[t.name]?a("el-tag",{attrs:{effect:"plain",type:"warning"}},[e._v(e._s(r.label))]):3==n.row[t.name]?a("el-tag",{attrs:{effect:"plain",type:"danger"}},[e._v(e._s(r.label))]):4==n.row[t.name]?a("el-tag",{attrs:{effect:"plain",type:""}},[e._v(e._s(r.label))]):n.row[t.name]==r.value?a("el-tag",{attrs:{effect:"plain",type:"info"}},[e._v(e._s(r.label))]):e._e()]:e._e()]})]}}],null,!0)}):t.name.indexOf("_time")>-1?a("el-table-column",{attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",[e._v(e._s(e.dateFormat(n.row[t.name])))])]}}],null,!0)}):a("el-table-column",{attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",[e._v(e._s(n.row[t.name]))])]}}],null,!0)})]:e._e()]}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.operateForView(t.row)}}},[e._v("查看")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.operateForDisable(t.row.id,0,t.$index)}}},[e._v("启用")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.operateForDisable(t.row.id,1,t.$index)}}},[e._v("锁定")])]}}])})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total,prev, pager, next","current-page":e.listPage.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.listPage,"currentPage",t)},"update:current-page":function(t){return e.$set(e.listPage,"currentPage",t)}}})],1)],1)},staticRenderFns:[]};var g={name:"ChannelManager",data:function(){return{params:{name:"AP_ARTICLE",page:1,size:10,where:[]},total:0,host:"",list:[],fileds:[{list:!0,label:"标题",name:"title",type:"input",placeholder:"请输入标题",rule:[{required:!0,message:"请输入标题",trigger:"blur"},{min:10,max:20,message:"标题在10~50个字符",trigger:"blur"}]},{list:!0,label:"作者",name:"author_name",type:"input"},{list:!0,label:"频道",name:"channel_name",type:"input"},{list:!0,label:"点赞数",name:"likes",type:"input"},{list:!0,label:"收藏数",name:"collection",type:"input"},{list:!0,label:"评论数",name:"collection",type:"input"},{list:!0,label:"阅读数",name:"views",type:"input"},{list:!0,label:"创建时间",name:"created_time",type:"hidden",value:f.a.format13HH((new Date).getTime())},{list:!0,label:"发布时间",name:"publish_time",type:"hidden",value:f.a.format13HH((new Date).getTime())}]}},mounted:function(){this.loadData()},components:{SearchTool:u,SearchResult:a("C7Lr")(m,h,!1,function(e){a("0hrC")},"data-v-4bc9d224",null).exports,Editor:a("zytZ").a},methods:{viewData:function(e){this.$refs.editor.view(e)},addData:function(e){this.$refs.editor.add()},submitSuccess:function(){this.loadData()},changeStatus:function(e,t){this.$set(this.list[e],"status",t)},changeParam:function(e){this.params.page=1,this.params.where[0]=e,this.loadData()},changePage:function(e){this.params.page=e.page,this.loadData()},loadData:function(){var e=this;return o()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.b)(i()({},e.params));case 2:0==(a=t.sent).code?(e.list=a.data.list,e.host=a.host,e.total=a.data.total):e.$message({type:"error",message:a.error_message});case 4:case"end":return t.stop()}},t,e)}))()}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Editor",{ref:"editor",attrs:{fileds:e.fileds,title:"内容",table:this.params.name,submitSuccess:e.submitSuccess}}),e._v(" "),a("search-tool",{attrs:{changeParam:e.changeParam,addData:e.addData}}),e._v(" "),a("search-result",{ref:"mySearchResult",attrs:{list:e.list,host:e.host,total:e.total,table:this.params.name,viewData:e.viewData,changePage:e.changePage,changeStatus:e.changeStatus,fileds:e.fileds,pageSize:e.params.size}})],1)},staticRenderFns:[]};var b=a("C7Lr")(g,v,!1,function(e){a("z1bh")},"data-v-37fe67cc",null);t.default=b.exports},z1bh:function(e,t){}});
//# sourceMappingURL=4.fdfece4fdc993258008c.js.map